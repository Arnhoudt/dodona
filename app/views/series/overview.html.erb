<% user = @user || current_user %>
<%= content_for :javascripts do %>
  <%= javascript_pack_tag 'series_overview' %>
<% end %>

<div class="col-sm-10 col-sm-offset-1 col-xs-12">
  <h2><%= @series.course.name %></h2><br>
  <%= render partial: 'series/series', locals: {
      series: @series,
      get_exercise_path: method(:exercise_anchor),
      user: @user
  } %>
  <% @series.exercises.each do |exercise| %>
    <div class="card exercise-description">
      <%= content_tag :a,
                      '',
                      name: exercise_anchor_id(exercise),
                      class: 'anchor' %>
      <div class="card-title card-title-colored">
        <h2 class="card-title-text">
          <%= link_to exercise.name, exercise_path(exercise) %>
        </h2>
      </div>
      <%= description_iframe exercise %>
      <div class="card-actions card-border hidden-print">
        <% if exercise.started_for?(user, @series) || @series.deadline&.past? %>
          <div class="btn-text submission-status-button">
            <%= render partial: 'exercises/user_status_icon', locals: {exercise: exercise, series: @series, user: user} %>
            <%= render partial: 'exercises/user_status', locals: {exercise: exercise, series: @series, user: user} %>
          </div>
        <% else %>
          <%= link_to t('exercises.show.handin'), course_series_exercise_path(@series.course, @series.id, exercise, anchor: "submission-card"), class: "btn-text" %>
        <% end %>
      </div>
    </div>
  <% end %>
</div>
